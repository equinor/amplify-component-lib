# This is a basic workflow to help you get started with Actions

name: Development Build & Commit

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ development ]


jobs:
  build:
    runs-on: ubuntu-latest
        
    steps:
    - uses: actions/checkout@v2
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v2
      with:
        node-version: 14.x

    - name: Install dependencies
      run: yarn install
      
    - name: Run Tests
      run: yarn run test:ci

    - name: Build Components  
      run: yarn run build-components

    - name: Remove Gitignore
      uses: JesseTG/rm@v1.0.2
      with:
        path: .gitignore

    - name: Commit Build Folder
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: Add build folder
        file_pattern: dist/*
        branch: development
